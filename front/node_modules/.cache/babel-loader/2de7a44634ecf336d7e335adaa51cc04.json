{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: \"User\",\n\n  data() {\n    return {\n      userName: window.localStorage.getItem(\"userName\"),\n      logoUrl: \"../assets/images/logo.png\",\n      isAdmin: window.localStorage.getItem(\"isAdmin\"),\n      index: 1,\n      form: {\n        name: '',\n        region: '',\n        date1: '',\n        date2: '',\n        delivery: false,\n        type: [],\n        resource: '',\n        desc: ''\n      },\n      order: {\n        name: window.localStorage.getItem(\"userName\"),\n        id: window.localStorage.getItem(\"id\"),\n        requestVol: 0,\n        startVol: 0,\n        chargingMode: \"\",\n        carVol: 0\n      },\n      carStatus: 0,\n      chargePileID: \"暂未加入排队序列\",\n      carsAhead: \"暂未加入排队序列\",\n      queueNo: 0,\n      number: \"暂未加入排队序列\",\n      area: \"暂未加入排队序列\",\n      car_per: 0,\n      ele_per: 0,\n      totalCar: 0,\n      isRunning: false,\n      timer: null,\n      timer2: null,\n      vol: 0,\n      menu: {},\n      timerList: [],\n      timerList2: [],\n      list: [],\n      ceshi: []\n    };\n  },\n\n  created() {},\n\n  mounted() {\n    this.cancle();\n    window.clearInterval(this.timer);\n    const userName = window.localStorage.getItem(\"userName\");\n    console.log(userName);\n  },\n\n  methods: {\n    test() {\n      var _this = this;\n\n      var temp = {\n        name: window.localStorage.getItem(\"userName\"),\n        id: window.localStorage.getItem(\"id\"),\n        requestVol: 0,\n        chargingMode: _this.order.chargingMode,\n        modeChoose: 'A',\n        time: '2022/6/16 9:10:00',\n        year: 2022,\n        month: 6,\n        day: 16,\n        hour: 9,\n        minute: 10,\n        second: 0\n      };\n\n      _this.startTest(i, temp);\n    },\n\n    startTest(i, order) {\n      var _this = this;\n\n      switch (order.modeChoose) {\n        case 'A':\n          if (order.chargingMode === 'O') {\n            _this.list.push(null);\n\n            let j, k;\n\n            for (k = 0; k < i; k++) {\n              if (_this.testData[k].id === _this.testData[i].id) {\n                j = k;\n                console.log(613, j);\n                break;\n              }\n            }\n\n            _this.endCharging(j);\n          } else {\n            _this.onSubmit(i, order);\n          }\n\n          break;\n\n        case 'B':\n          _this.list.push(null);\n\n          _this.switch_broken(i, order);\n\n          break;\n\n        case 'C':\n          _this.list.push(null);\n\n          let j, k;\n\n          for (k = 0; k < i; k++) {\n            if (_this.testData[k].id === _this.testData[i].id) {\n              j = k;\n              console.log(613, j);\n              break;\n            }\n          }\n\n          _this.change(i, order, j);\n\n          break;\n      }\n    },\n\n    switch_broken(i, order) {\n      let _this = this;\n\n      if (order.name === 'F1') {\n        order.id = 1;\n      } else {\n        order.id = 3;\n      }\n\n      if (order.requestVol === 0) {\n        axios.post('http://127.0.0.1:5000/admin/charger/break', {\n          'chargerID': order.id\n        }).then(function (response) {\n          if (response.data === 1) {} else {\n            console.log('ERROR!');\n          }\n        });\n      } else {\n        axios.post('http://127.0.0.1:5000/admin/charger/fix', {\n          'chargerID': order.id\n        }).then(function (response) {\n          if (response.data === 1) {} else {\n            console.log('ERROR!');\n          }\n        });\n      }\n    },\n\n    change(i, order, j) {\n      var _this = this;\n\n      window.clearInterval(_this.timerList[j]);\n      window.clearInterval(_this.timerList2[j]);\n      axios.post('http://127.0.0.1:5000/usr/modify-chargingreq', _this.list[i].order).then(function (response) {\n        switch (data.carStatus) {\n          case 3:\n            _this.list[j].area = \"优先等待区\";\n            break;\n\n          case 2:\n            _this.list[j].area = \"等待区\";\n            break;\n\n          case 1:\n            _this.list[j].area = \"充电等待区\";\n            break;\n\n          default:\n            _this.list[j].area = \"充电区\";\n            break;\n        }\n\n        _this.list[j].number = data.carsAhead + 1 + \"\";\n        _this.list[j].carsAhead = data.carsAhead + \"\";\n        _this.list[j].chargePileID = data.chargePileID;\n        var s = j + 1 + '进入' + _this.area + '在' + order.time + '修改了' + order.requestVol + '充电量';\n\n        _this.ceshi.push(s);\n\n        _this.timerList[i] = setInterval(function () {\n          _this.perSecond(i);\n        }, 1000);\n      });\n    },\n\n    cancle() {\n      var _this = this;\n\n      axios.post('http://127.0.0.1:5000/usr/cancel', _this.order).then(function (response) {\n        window.clearInterval(_this.timer);\n        window.clearInterval(_this.timer2);\n        _this.isRunning = false;\n      });\n    },\n\n    endCharging(index) {\n      console.log(index);\n\n      var _this = this;\n\n      axios.post('http://127.0.0.1:5000/usr/cancel', _this.list[index].order).then(function (response) {\n        var str = _this.list[index].order.id - 2 + '结束充电';\n\n        _this.ceshi.push(str);\n\n        window.clearInterval(_this.timerList[index]);\n        window.clearInterval(_this.timerList2[index]);\n        console.log(726, response.data);\n\n        if (response.data.msg !== 'success to cancel!') {\n          axios.post('http://127.0.0.1:5000/usr/end-charging', _this.list[index].order).then(function (response) {\n            _this.list[index].area = '离开';\n            _this.list[index].chargePileID = null;\n            _this.list[index].carsAhead = null;\n            _this.isRunning = false; // _this.menu = response.data\n          }).catch(function (err) {\n            console.log(err);\n          });\n        }\n      });\n    },\n\n    perSecond(i) {\n      const _this = this;\n\n      console.log(728, _this.list, _this.list[i], i);\n      axios.post('http://127.0.0.1:5000/usr/car-status', _this.list[i].order).then(function (response) {\n        _this.list[i].carsAhead = response.data.carsAhead;\n        console.log(\"V\", i + 1, response.data);\n\n        switch (response.data.carStatus) {\n          case 3:\n            _this.list[i].area = \"优先等待区\";\n            break;\n\n          case 2:\n            _this.list[i].area = \"等待区\";\n            break;\n\n          case 1:\n            _this.list[i].number = null;\n            _this.list[i].carsAhead = null;\n            _this.list[i].area = \"充电等待区\";\n            break;\n\n          default:\n            _this.list[i].area = \"充电区\";\n            break;\n        }\n\n        _this.list[i].chargePileID = response.data.chargePileID;\n\n        switch (response.data.status) {\n          case 'charging':\n            window.clearInterval(_this.timerList[i]);\n            axios.post('http://127.0.0.1:5000/usr/start-charging', _this.list[i].order).then(function (response) {\n              _this.list[i].queueNo = null;\n              console.log(\"V\", i + 1, response.data);\n\n              switch (response.data.carStatus) {\n                case 3:\n                  _this.list[i].area = \"优先等待区\";\n                  break;\n\n                case 2:\n                  _this.list[i].area = \"等待区\";\n                  break;\n\n                case 1:\n                  _this.list[i].area = \"充电等待区\";\n                  break;\n\n                default:\n                  _this.list[i].area = \"充电区\";\n                  break;\n              }\n\n              _this.timerList2[i] = setInterval(function () {\n                _this.perSecond2(i);\n              }, 1000);\n            });\n        }\n      });\n    },\n\n    perSecond2(i) {\n      const _this = this;\n\n      axios.post('http://127.0.0.1:5000/usr/car-status', _this.list[i].order).then(function (response) {\n        _this.list[i].number = null;\n        _this.list[i].chargePileID = response.data.chargePileID;\n        _this.list[i].usedVol = response.data.usedVol;\n        _this.list[i].usedCost = response.data.usedCost;\n\n        switch (response.data.carStatus) {\n          case 3:\n            _this.list[i].carsAhead = response.data.carsAhead;\n            _this.list[i].area = \"优先等待区\";\n            break;\n\n          case 2:\n            _this.list[i].area = \"等待区\";\n            break;\n\n          case 1:\n            _this.list[i].number = null;\n            _this.list[i].carsAhead = null;\n            _this.list[i].area = \"充电等待区\";\n            break;\n\n          default:\n            _this.list[i].area = \"充电区\";\n            break;\n        }\n\n        if (response.data.status === 'charging-finished') {\n          _this.list[i].carsAhead = response.data.carsAhead;\n          _this.list[i].chargePileID = response.data.chargePileID;\n          window.clearInterval(_this.timerList2[i]); // _this.list[i] = null\n\n          console.log(\"V\", i + 1, response.data);\n          axios.post('http://127.0.0.1:5000/usr/end-charging', _this.list[i].order).then(function (response) {\n            console.log(\"V\", i + 1, response.data.status);\n            _this.list[i].area = '离开';\n            _this.list[i].chargePileID = null;\n            _this.list[i].carsAhead = null;\n            _this.isRunning = false;\n            _this.menu = response.data;\n          }).catch(function (err) {\n            console.log(err);\n          });\n        } else if (response.data.status === 'charging') {\n          _this.list[i].vol += response.data.incVol;\n          _this.list[i].ele_per = _this.list[i].vol / _this.list[i].carVol * 100;\n        } else if (response.data.status === 'prewaiting') {} else {}\n      });\n    },\n\n    handleSelect(key, keyPath) {\n      this.index = key;\n    },\n\n    onSubmit(i, order) {\n      var mode = [100, 150, 200, 250, 300];\n\n      var _this = this;\n\n      _this.order.carVol = mode[Math.floor(Math.random() * 5)];\n      _this.order.startVol = Math.floor(Math.random() * (order.carVol + 1));\n      _this.vol = order.startVol;\n      axios.post('http://127.0.0.1:5000/usr/getqueueno', order).then(function (response) {\n        let data = response.data;\n        _this.carStatus = data.carStatus;\n        _this.chargePileID = data.chargePileID;\n        _this.carsAhead = data.carsAhead + \"\";\n        _this.queueNo = data.queueNo;\n        _this.number = data.carsAhead + 1 + \"\";\n        _this.totalCar = data.carsAhead + 1;\n        _this.car_per = (data.carsAhead + 1 - data.carsAhead) / (data.carsAhead + 1) * 100;\n        _this.ele_per = _this.order.startVol / _this.order.carVol * 100;\n        _this.isRunning = true;\n\n        switch (data.carStatus) {\n          case 3:\n            _this.area = \"优先等待区\";\n            break;\n\n          case 2:\n            _this.area = \"等待区\";\n            break;\n\n          case 1:\n            _this.area = \"充电等待区\";\n            break;\n\n          default:\n            _this.area = \"充电区\";\n            break;\n        }\n\n        var str = order.id - 2 + '进入' + _this.area + '在' + order.time + '申请了' + order.requestVol + '充电量';\n\n        _this.ceshi.push(str);\n\n        var obj = {};\n        obj.number = data.carsAhead + 1 + \"\";\n        obj.carsAhead = data.carsAhead + \"\";\n        obj.area = _this.area;\n        obj.chargePileID = data.chargePileID;\n        obj.car_per = (data.carsAhead + 1 - data.carsAhead) / (data.carsAhead + 1) * 100;\n        obj.carVol = mode[Math.floor(Math.random() * 5)];\n        obj.startVol = Math.floor(Math.random() * (obj.carVol + 1));\n        obj.ele_per = obj.startVol / obj.carVol * 100;\n        obj.vol = obj.startVol;\n        obj.order = order;\n        obj.order.startVol = obj.startVol;\n        obj.order.carVol = obj.carVol;\n        obj.usedCost = 0;\n        obj.usedVol = 0;\n\n        _this.list.push(obj);\n\n        console.log(895, i, _this.list);\n        _this.timerList[i] = setInterval(function () {\n          _this.perSecond(i);\n        }, 1000);\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","name","data","userName","window","localStorage","getItem","logoUrl","isAdmin","index","form","region","date1","date2","delivery","type","resource","desc","order","id","requestVol","startVol","chargingMode","carVol","carStatus","chargePileID","carsAhead","queueNo","number","area","car_per","ele_per","totalCar","isRunning","timer","timer2","vol","menu","timerList","timerList2","list","ceshi","created","mounted","cancle","clearInterval","console","log","methods","test","_this","temp","modeChoose","time","year","month","day","hour","minute","second","startTest","i","push","j","k","testData","endCharging","onSubmit","switch_broken","change","post","then","response","s","setInterval","perSecond","str","msg","catch","err","status","perSecond2","usedVol","usedCost","incVol","handleSelect","key","keyPath","mode","Math","floor","random","obj"],"sourceRoot":"","sources":["D:\\software_proj\\front\\src\\views\\User.vue"],"sourcesContent":["<template>\r\n  <div class=\"chat\">\r\n\r\n    <div>\r\n      <el-container>\r\n        <el-aside width=\"200px\" style=\"background-color: transparent; border-radius: 5px;\">\r\n\r\n          <el-menu\r\n              default-active=\"1\"\r\n              class=\"el-menu-vertical-demo\"\r\n              @open=\"handleOpen\"\r\n              @close=\"handleClose\"\r\n              background-color=\"#FFFFFF66\"\r\n              @select=\"handleSelect\"\r\n          >\r\n            <el-menu-item index=\"1\">\r\n              <template #title>\r\n                <el-icon>\r\n                  <location/>\r\n                </el-icon>\r\n                <span>个人信息</span>\r\n              </template>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"2\">\r\n              <el-icon>\r\n                <icon-menu/>\r\n              </el-icon>\r\n              <span>充电详单</span>\r\n            </el-menu-item>\r\n\r\n            <el-menu-item index=\"3\">\r\n              <el-icon>\r\n                <icon-menu/>\r\n              </el-icon>\r\n              <span>充电界面</span>\r\n            </el-menu-item>\r\n\r\n          </el-menu>\r\n        </el-aside>\r\n        <el-main>\r\n          <div v-if=\"index == 1\">\r\n            <el-card>\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-avatar :size=\"100\"\r\n                             src=\"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\"></el-avatar>\r\n                </el-col>\r\n              </el-row>\r\n              <el-form :model=\"form\" label-width=\"120px\" style=\"margin-top: 20px;\">\r\n                <el-form-item label=\"用户名：\">\r\n                  <div>{{ userName }}</div>\r\n                </el-form-item>\r\n              </el-form>\r\n            </el-card>\r\n          </div>\r\n          <div v-if=\"index == 2\">\r\n            <el-card>\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-avatar :size=\"100\"\r\n                             src=\"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\"></el-avatar>\r\n                </el-col>\r\n              </el-row>\r\n              <el-form :model=\"form\" label-width=\"120px\" style=\"margin-top: 20px;\">\r\n                <el-form-item label=\"用户名：\">\r\n                  <div>{{ userName }}</div>\r\n                </el-form-item>\r\n              </el-form>\r\n            </el-card>\r\n          </div>\r\n          <div v-if=\"index == 3\">\r\n            <el-card>\r\n              <el-form :model=\"order\" label-width=\"120px\">\r\n                <el-form-item label=\"充电电量\">\r\n                  <el-input v-model=\"order.requestVol\"/>\r\n                </el-form-item>\r\n                <el-form-item label=\"充电模式\">\r\n                  <el-select v-model=\"order.chargingMode\" placeholder=\"请选择你的充电模式\">\r\n                    <el-option label=\"快充\" value=\"F\"/>\r\n                    <el-option label=\"慢充\" value=\"T\"/>\r\n                  </el-select>\r\n                </el-form-item>\r\n\r\n                <el-form-item>\r\n                  <el-button v-if=\"isRunning == false\" type=\"primary\" @click=\"test\">请求充电</el-button>\r\n                  <el-button v-else type=\"primary\" @click=\"test\" disabled>请求充电</el-button>\r\n                  <el-button @click=\"cancle\">结束充电</el-button>\r\n                </el-form-item>\r\n              </el-form>\r\n            </el-card>\r\n            <el-card v-for=\"item in list\" v-if=\"item != null\" style=\"margin-top: 20px; width: 500px;\">\r\n              <el-row>\r\n                <el-col :span=\"6\">车辆标号：</el-col>\r\n                <el-col :span=\"5\">{{item.order.id - 2}}</el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"6\">本车排队代码：</el-col>\r\n                <el-col :span=\"5\">{{ item.number }}</el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"6\">前车等待数量：</el-col>\r\n                <el-col :span=\"5\">{{ item.carsAhead }}</el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"6\">当前所在区域：</el-col>\r\n                <el-col :span=\"5\">{{ item.area }}</el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"6\">使用充电桩：</el-col>\r\n                <el-col :span=\"5\">{{ item.chargePileID }}</el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"6\">当前使用电量：</el-col>\r\n                <el-col :span=\"5\">{{ (item.usedVol).toFixed(2) }}</el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"6\">当前费用：</el-col>\r\n                <el-col :span=\"5\">{{ (item.usedCost).toFixed(2) }}</el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"6\">等待前车进度：</el-col>\r\n                <el-col :span=\"5\">\r\n                  <el-progress\r\n                      :text-inside=\"true\"\r\n                      :stroke-width=\"20\"\r\n                      :percentage=\"item.car_per\"\r\n                      status=\"exception\"\r\n                      color=\"blue\"\r\n                  >\r\n                    <span>排队进度</span>\r\n                  </el-progress>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"6\">汽车充电进度：</el-col>\r\n                <el-col :span=\"5\">\r\n                  <el-progress type=\"dashboard\" :percentage=\"item.ele_per\" :indeterminate=\"true\">\r\n                    <template #default=\"{ percentage }\">\r\n                      <span class=\"percentage-value\">{{ percentage.toFixed(2) }}%</span>\r\n\r\n                    </template>\r\n                  </el-progress>\r\n                </el-col>\r\n              </el-row>\r\n              <button @click=\"endCharging(index)\">结束充电</button>\r\n            </el-card>\r\n          </div>\r\n\r\n        </el-main>\r\n      </el-container>\r\n    </div>\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"User\",\r\n  data() {\r\n    return {\r\n      userName: window.localStorage.getItem(\"userName\"),\r\n      logoUrl: \"../assets/images/logo.png\",\r\n      isAdmin: window.localStorage.getItem(\"isAdmin\"),\r\n      index: 1,\r\n      form: {\r\n        name: '',\r\n        region: '',\r\n        date1: '',\r\n        date2: '',\r\n        delivery: false,\r\n        type: [],\r\n        resource: '',\r\n        desc: ''\r\n      },\r\n      order: {\r\n        name: window.localStorage.getItem(\"userName\"),\r\n        id: window.localStorage.getItem(\"id\"),\r\n        requestVol: 0,\r\n        startVol: 0,\r\n        chargingMode: \"\",\r\n        carVol: 0\r\n      },\r\n      carStatus: 0,\r\n      chargePileID: \"暂未加入排队序列\",\r\n      carsAhead: \"暂未加入排队序列\",\r\n      queueNo: 0,\r\n      number: \"暂未加入排队序列\",\r\n      area: \"暂未加入排队序列\",\r\n      car_per: 0,\r\n      ele_per: 0,\r\n      totalCar: 0,\r\n      isRunning: false,\r\n      timer: null,\r\n      timer2: null,\r\n      vol: 0,\r\n      menu: {},\r\n      timerList: [],\r\n      timerList2: [],\r\n      list: [],\r\n      ceshi: []\r\n    }\r\n  },\r\n  created() {\r\n\r\n  },\r\n  mounted() {\r\n    this.cancle()\r\n\r\n    window.clearInterval(this.timer)\r\n    const userName = window.localStorage.getItem(\"userName\")\r\n    console.log(userName)\r\n  },\r\n  methods: {\r\n    test() {\r\n      var _this = this\r\n\r\n      var temp = {\r\n            name: window.localStorage.getItem(\"userName\"),\r\n            id: window.localStorage.getItem(\"id\"),\r\n            requestVol : 0,\r\n            chargingMode : _this.order.chargingMode,\r\n            modeChoose : 'A',\r\n            time : '2022/6/16 9:10:00',\r\n            year : 2022,\r\n            month : 6,\r\n            day : 16,\r\n            hour : 9,\r\n            minute : 10,\r\n            second : 0,\r\n          }\r\n      _this.startTest(i, temp)\r\n\r\n\r\n\r\n    },\r\n    startTest(i, order){\r\n      var _this = this\r\n\r\n      switch (order.modeChoose){\r\n        case 'A':\r\n          if(order.chargingMode === 'O'){\r\n            _this.list.push(null)\r\n            let j,k;\r\n            for (k = 0; k < i; k++){\r\n              if(_this.testData[k].id === _this.testData[i].id){\r\n                j = k;\r\n                console.log(613, j)\r\n                break;\r\n              }\r\n            }\r\n            _this.endCharging(j)\r\n          }\r\n          else{\r\n            _this.onSubmit(i, order)\r\n          }\r\n          break;\r\n        case 'B':\r\n          _this.list.push(null)\r\n          _this.switch_broken(i, order)\r\n          break;\r\n        case 'C':\r\n          _this.list.push(null)\r\n          let j, k;\r\n          for (k = 0; k < i; k++){\r\n            if(_this.testData[k].id === _this.testData[i].id){\r\n              j = k;\r\n              console.log(613, j)\r\n              break;\r\n            }\r\n          }\r\n          _this.change(i, order, j)\r\n          break;\r\n      }\r\n\r\n    },\r\n\r\n    switch_broken(i, order){\r\n      let _this = this;\r\n      if(order.name === 'F1'){\r\n        order.id = 1\r\n      }else {\r\n        order.id = 3\r\n      }\r\n      if(order.requestVol === 0){\r\n        axios.post('http://127.0.0.1:5000/admin/charger/break', {'chargerID': order.id}).then(\r\n            function (response){\r\n              if(response.data === 1){\r\n              }else {\r\n                console.log('ERROR!')\r\n              }\r\n            }\r\n        )\r\n      }\r\n      else{\r\n        axios.post('http://127.0.0.1:5000/admin/charger/fix', {'chargerID': order.id}).then(\r\n            function (response){\r\n              if(response.data === 1){\r\n              }else {\r\n                console.log('ERROR!')\r\n              }\r\n            }\r\n        )\r\n      }\r\n    },\r\n    change(i, order, j){\r\n\r\n      var _this = this\r\n      window.clearInterval(_this.timerList[j])\r\n      window.clearInterval(_this.timerList2[j])\r\n      axios.post('http://127.0.0.1:5000/usr/modify-chargingreq', _this.list[i].order).then(\r\n          function (response) {\r\n            switch (data.carStatus) {\r\n              case 3:\r\n                _this.list[j].area = \"优先等待区\"\r\n                break;\r\n              case 2:\r\n                _this.list[j].area = \"等待区\"\r\n                break;\r\n              case 1:\r\n                _this.list[j].area = \"充电等待区\"\r\n                break;\r\n              default:\r\n                _this.list[j].area = \"充电区\"\r\n                break;\r\n            }\r\n\r\n            _this.list[j].number = data.carsAhead + 1 + \"\"\r\n            _this.list[j].carsAhead = data.carsAhead + \"\"\r\n\r\n            _this.list[j].chargePileID = data.chargePileID\r\n            var s = (j+1) + '进入' + _this.area + '在' + order.time + '修改了' + order.requestVol + '充电量'\r\n            _this.ceshi.push(s)\r\n            _this.timerList[i] = setInterval(function () {\r\n              _this.perSecond(i)\r\n            }, 1000)\r\n          }\r\n      )\r\n    },\r\n    cancle() {\r\n      var _this = this\r\n      axios.post('http://127.0.0.1:5000/usr/cancel', _this.order).then(\r\n          function (response) {\r\n            window.clearInterval(_this.timer)\r\n            window.clearInterval(_this.timer2)\r\n            _this.isRunning = false\r\n          }\r\n      )\r\n    },\r\n    endCharging(index) {\r\n      console.log(index)\r\n      var _this = this\r\n      axios.post('http://127.0.0.1:5000/usr/cancel', _this.list[index].order).then(\r\n          function (response) {\r\n            var str = (_this.list[index].order.id - 2) + '结束充电'\r\n            _this.ceshi.push(str)\r\n            window.clearInterval(_this.timerList[index])\r\n            window.clearInterval(_this.timerList2[index])\r\n            console.log(726, response.data)\r\n            if(response.data.msg !== 'success to cancel!'){\r\n              axios.post('http://127.0.0.1:5000/usr/end-charging', _this.list[index].order).then(\r\n                  function (response) {\r\n                    _this.list[index].area = '离开'\r\n                    _this.list[index].chargePileID = null\r\n                    _this.list[index].carsAhead = null\r\n                    _this.isRunning = false\r\n                    // _this.menu = response.data\r\n                  }\r\n              ).catch(\r\n                  function (err){\r\n                    console.log(err)\r\n                  }\r\n              )\r\n            }\r\n          }\r\n      )\r\n    },\r\n    perSecond(i) {\r\n      const _this = this\r\n      console.log(728, _this.list, _this.list[i], i)\r\n      axios.post('http://127.0.0.1:5000/usr/car-status', _this.list[i].order).then(\r\n          function (response) {\r\n            _this.list[i].carsAhead = response.data.carsAhead\r\n            console.log(\"V\", i+1, response.data)\r\n            switch (response.data.carStatus) {\r\n              case 3:\r\n                _this.list[i].area = \"优先等待区\"\r\n                break;\r\n              case 2:\r\n                _this.list[i].area = \"等待区\"\r\n                break;\r\n              case 1:\r\n                _this.list[i].number = null\r\n                _this.list[i].carsAhead = null\r\n                _this.list[i].area = \"充电等待区\"\r\n                break;\r\n              default:\r\n                _this.list[i].area = \"充电区\"\r\n                break;\r\n            }\r\n            _this.list[i].chargePileID = response.data.chargePileID\r\n\r\n            switch (response.data.status){\r\n              case 'charging':\r\n                window.clearInterval(_this.timerList[i])\r\n                axios.post('http://127.0.0.1:5000/usr/start-charging', _this.list[i].order).then(\r\n                    function (response) {\r\n                      _this.list[i].queueNo = null\r\n                      console.log(\"V\", i+1, response.data)\r\n                      switch (response.data.carStatus) {\r\n                        case 3:\r\n                          _this.list[i].area = \"优先等待区\"\r\n                          break;\r\n                        case 2:\r\n                          _this.list[i].area = \"等待区\"\r\n                          break;\r\n                        case 1:\r\n                          _this.list[i].area = \"充电等待区\"\r\n                          break;\r\n                        default:\r\n                          _this.list[i].area = \"充电区\"\r\n                          break;\r\n                      }\r\n                      _this.timerList2[i] = setInterval(function () {\r\n                        _this.perSecond2(i)\r\n                      }, 1000)\r\n                    }\r\n                )\r\n            }\r\n          }\r\n      )\r\n    },\r\n    perSecond2(i) {\r\n      const _this = this\r\n      axios.post('http://127.0.0.1:5000/usr/car-status', _this.list[i].order).then(\r\n          function (response) {\r\n            _this.list[i].number = null\r\n            _this.list[i].chargePileID = response.data.chargePileID\r\n            _this.list[i].usedVol = response.data.usedVol\r\n            _this.list[i].usedCost = response.data.usedCost\r\n            switch (response.data.carStatus) {\r\n              case 3:\r\n                _this.list[i].carsAhead = response.data.carsAhead\r\n                _this.list[i].area = \"优先等待区\"\r\n                break;\r\n              case 2:\r\n                _this.list[i].area = \"等待区\"\r\n                break;\r\n              case 1:\r\n                _this.list[i].number = null\r\n                _this.list[i].carsAhead = null\r\n                _this.list[i].area = \"充电等待区\"\r\n                break;\r\n              default:\r\n                _this.list[i].area = \"充电区\"\r\n                break;\r\n            }\r\n            if (response.data.status === 'charging-finished'){\r\n              _this.list[i].carsAhead = response.data.carsAhead\r\n              _this.list[i].chargePileID = response.data.chargePileID\r\n              window.clearInterval(_this.timerList2[i])\r\n              // _this.list[i] = null\r\n              console.log(\"V\", i+1, response.data)\r\n              axios.post('http://127.0.0.1:5000/usr/end-charging', _this.list[i].order).then(\r\n                  function (response) {\r\n                    console.log(\"V\", i+1, response.data.status)\r\n                    _this.list[i].area = '离开'\r\n                    _this.list[i].chargePileID = null\r\n                    _this.list[i].carsAhead = null\r\n                    _this.isRunning = false\r\n                    _this.menu = response.data\r\n                  }\r\n              ).catch(\r\n                  function (err){\r\n                    console.log(err)\r\n                  }\r\n              )\r\n            }\r\n            else if (response.data.status === 'charging'){\r\n              _this.list[i].vol += response.data.incVol\r\n              _this.list[i].ele_per = (_this.list[i].vol / _this.list[i].carVol) * 100\r\n            }\r\n            else if (response.data.status === 'prewaiting'){\r\n\r\n            }\r\n            else {\r\n\r\n            }\r\n          }\r\n      )\r\n    },\r\n    handleSelect(key, keyPath) {\r\n      this.index = key\r\n    },\r\n    onSubmit(i, order) {\r\n      var mode = [100, 150, 200, 250, 300]\r\n      var _this = this\r\n      _this.order.carVol = mode[Math.floor(Math.random() * 5)]\r\n      _this.order.startVol = Math.floor(Math.random() * (order.carVol + 1))\r\n      _this.vol = order.startVol\r\n      axios.post('http://127.0.0.1:5000/usr/getqueueno', order).then(\r\n          function (response) {\r\n\r\n            let data = response.data\r\n            _this.carStatus = data.carStatus\r\n            _this.chargePileID = data.chargePileID\r\n            _this.carsAhead = data.carsAhead + \"\"\r\n            _this.queueNo = data.queueNo\r\n            _this.number = data.carsAhead + 1 + \"\"\r\n            _this.totalCar = data.carsAhead + 1\r\n            _this.car_per = (data.carsAhead + 1 - data.carsAhead) / (data.carsAhead + 1) * 100\r\n            _this.ele_per = (_this.order.startVol / _this.order.carVol) * 100\r\n            _this.isRunning = true\r\n            switch (data.carStatus) {\r\n              case 3:\r\n                _this.area = \"优先等待区\"\r\n                break;\r\n              case 2:\r\n                _this.area = \"等待区\"\r\n                break;\r\n              case 1:\r\n                _this.area = \"充电等待区\"\r\n                break;\r\n              default:\r\n                _this.area = \"充电区\"\r\n                break;\r\n            }\r\n            var str = (order.id - 2) + '进入' + _this.area + '在' + order.time + '申请了' + order.requestVol + '充电量'\r\n            _this.ceshi.push(str)\r\n            var obj = {}\r\n            obj.number = data.carsAhead + 1 + \"\"\r\n            obj.carsAhead = data.carsAhead + \"\"\r\n            obj.area = _this.area\r\n            obj.chargePileID = data.chargePileID\r\n            obj.car_per = (data.carsAhead + 1 - data.carsAhead) / (data.carsAhead + 1) * 100\r\n\r\n            obj.carVol = mode[Math.floor(Math.random() * 5)]\r\n            obj.startVol = Math.floor(Math.random() * (obj.carVol + 1))\r\n            obj.ele_per = (obj.startVol / obj.carVol) * 100\r\n            obj.vol = obj.startVol\r\n            obj.order = order\r\n            obj.order.startVol = obj.startVol\r\n            obj.order.carVol = obj.carVol\r\n            obj.usedCost = 0\r\n            obj.usedVol = 0\r\n\r\n            _this.list.push(obj)\r\n            console.log(895, i, _this.list)\r\n            _this.timerList[i] = setInterval(function () {\r\n              _this.perSecond(i)\r\n            }, 1000)\r\n\r\n          }\r\n      )\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.chat {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 200%;\r\n  z-index: -1;\r\n\r\n  background-image: linear-gradient(45deg, rgba(0, 200, 255, 0.4) 0%, rgba(132, 43, 171, 0.4) 100%);\r\n}\r\n\r\n#title {\r\n  color: white;\r\n  position: center !important;\r\n}\r\n\r\n.contain {\r\n  background: rgba(34, 34, 34, 0.5) !important;\r\n}\r\n\r\n.m-card {\r\n  margin-right: 40px;\r\n  background-image: linear-gradient(45deg, rgba(0, 200, 255, 0.4) 0%, rgba(132, 43, 171, 0.4) 100%);\r\n}\r\n\r\n.ourpage {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: -1;\r\n  border-radius: 5px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}