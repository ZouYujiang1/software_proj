{"ast":null,"code":"import { createApp } from 'vue';\nimport App from './App.vue';\nimport axios from 'axios';\nimport store from \"./store\";\nimport router from \"./router\";\nimport $ from 'jquery';\ncreateApp(App).config.globalProperties.$ = $;\naxios.defaults.baseURL = 'http://127.0.0.1:5000';\naxios.interceptors.request.use(function (config) {\n  // console.log(\"进入请求拦截器！\")\n  // 在发送请求之前做些什么\n  return config;\n}, function (error) {\n  // 对请求错误做些什么\n  //console.log(\"请求失败！\")\n  return Promise.reject(error);\n}), axios.interceptors.response.use(function (response) {\n  const res = response.status; //console.log(\"后置拦截\")\n  //console.log(res.code)\n  // 当结果的code是否为200的情况\n\n  if (res === 200) {\n    return response;\n  } else {\n    // 弹窗异常信息\n    this.$message('这是一条消息提示'); // 直接拒绝往下面返回结果信息\n\n    return Promise.reject(response.data.msg);\n  }\n}, function (error) {\n  console.log('err' + error); // for debug\n\n  if (error.response.data) {\n    error.message = error.response.data.msg;\n  } // 根据请求状态觉得是否登录或者提示其他\n\n\n  if (error.response.status === 401) {\n    store.commit('REMOVE_INFO');\n    router.push({\n      path: '/index/login'\n    });\n    error.message = '请重新登录';\n  }\n\n  if (error.response.status === 403) {\n    error.message = '权限不足，无法访问';\n  }\n\n  return Promise.reject(error);\n});","map":{"version":3,"names":["createApp","App","axios","store","router","$","config","globalProperties","defaults","baseURL","interceptors","request","use","error","Promise","reject","response","res","status","$message","data","msg","console","log","message","commit","push","path"],"sources":["D:/software_proj/front/src/axios.js"],"sourcesContent":["import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport axios from 'axios'\r\n\r\nimport store from \"./store\"\r\nimport router from \"./router\"\r\nimport $ from 'jquery'\r\n\r\ncreateApp(App).config.globalProperties.$=$\r\n\r\naxios.defaults.baseURL='http://127.0.0.1:5000'\r\naxios.interceptors.request.use(\r\n    function (config) {\r\n        // console.log(\"进入请求拦截器！\")\r\n        // 在发送请求之前做些什么\r\n        return config;\r\n    },\r\n    function (error) {\r\n        // 对请求错误做些什么\r\n        //console.log(\"请求失败！\")\r\n        return Promise.reject(error);\r\n    }),\r\naxios.interceptors.response.use(\r\n    function (response) {\r\n        const res = response.status;\r\n        //console.log(\"后置拦截\")\r\n        //console.log(res.code)\r\n        // 当结果的code是否为200的情况\r\n\r\n        if (res === 200) {\r\n\r\n            return response\r\n        } else {\r\n            // 弹窗异常信息\r\n            this.$message('这是一条消息提示');\r\n\r\n            // 直接拒绝往下面返回结果信息\r\n\r\n\r\n            return Promise.reject(response.data.msg)\r\n        }\r\n\r\n\r\n    },\r\n    function (error)  {\r\n        console.log('err' + error)// for debug\r\n        if(error.response.data) {\r\n            error.message = error.response.data.msg\r\n        }\r\n        // 根据请求状态觉得是否登录或者提示其他\r\n        if (error.response.status === 401) {\r\n            store.commit('REMOVE_INFO');\r\n            router.push({\r\n                path: '/index/login'\r\n            })\r\n            error.message = '请重新登录';\r\n        }\r\n        if (error.response.status === 403) {\r\n            error.message = '权限不足，无法访问';\r\n        }\r\n\r\n\r\n        return Promise.reject(error)\r\n    })\r\n"],"mappings":"AAAA,SAASA,SAAT,QAA0B,KAA1B;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,CAAP,MAAc,QAAd;AAEAL,SAAS,CAACC,GAAD,CAAT,CAAeK,MAAf,CAAsBC,gBAAtB,CAAuCF,CAAvC,GAAyCA,CAAzC;AAEAH,KAAK,CAACM,QAAN,CAAeC,OAAf,GAAuB,uBAAvB;AACAP,KAAK,CAACQ,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACI,UAAUN,MAAV,EAAkB;EACd;EACA;EACA,OAAOA,MAAP;AACH,CALL,EAMI,UAAUO,KAAV,EAAiB;EACb;EACA;EACA,OAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAVL,GAWAX,KAAK,CAACQ,YAAN,CAAmBM,QAAnB,CAA4BJ,GAA5B,CACI,UAAUI,QAAV,EAAoB;EAChB,MAAMC,GAAG,GAAGD,QAAQ,CAACE,MAArB,CADgB,CAEhB;EACA;EACA;;EAEA,IAAID,GAAG,KAAK,GAAZ,EAAiB;IAEb,OAAOD,QAAP;EACH,CAHD,MAGO;IACH;IACA,KAAKG,QAAL,CAAc,UAAd,EAFG,CAIH;;IAGA,OAAOL,OAAO,CAACC,MAAR,CAAeC,QAAQ,CAACI,IAAT,CAAcC,GAA7B,CAAP;EACH;AAGJ,CArBL,EAsBI,UAAUR,KAAV,EAAkB;EACdS,OAAO,CAACC,GAAR,CAAY,QAAQV,KAApB,EADc,CACY;;EAC1B,IAAGA,KAAK,CAACG,QAAN,CAAeI,IAAlB,EAAwB;IACpBP,KAAK,CAACW,OAAN,GAAgBX,KAAK,CAACG,QAAN,CAAeI,IAAf,CAAoBC,GAApC;EACH,CAJa,CAKd;;;EACA,IAAIR,KAAK,CAACG,QAAN,CAAeE,MAAf,KAA0B,GAA9B,EAAmC;IAC/Bf,KAAK,CAACsB,MAAN,CAAa,aAAb;IACArB,MAAM,CAACsB,IAAP,CAAY;MACRC,IAAI,EAAE;IADE,CAAZ;IAGAd,KAAK,CAACW,OAAN,GAAgB,OAAhB;EACH;;EACD,IAAIX,KAAK,CAACG,QAAN,CAAeE,MAAf,KAA0B,GAA9B,EAAmC;IAC/BL,KAAK,CAACW,OAAN,GAAgB,WAAhB;EACH;;EAGD,OAAOV,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAzCL,CAXA"},"metadata":{},"sourceType":"module"}